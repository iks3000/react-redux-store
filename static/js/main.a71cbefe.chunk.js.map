{"version":3,"sources":["store.js","components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/book-list/book-list.js","components/book-list/index.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","ShopHeader","numItem","total","className","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","toFixed","onClick","Spinner","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","BookList","books","map","bookItem","key","id","BookListContainer","this","loading","Component","connect","bookList","bindActionCreators","mapDispatchToProps","onIncrease","onDecrease","onDelete","ShoppingCartTable","shoppingCart","items","cartItems","orderTotal","SumTotal","sum","reduce","acc","curr","count","item","idx","HomePage","CartPage","App","role","exact","path","component","ErrorBoundry","state","hasError","setState","children","BookStoreService","Promise","resolve","reject","setTimeout","Math","random","Error","console","log","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","el","accumulator","current","newItem","updateCartItem","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","BookstoreService","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.a71cbefe.chunk.js","sourcesContent":["import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport reducer from './reducers';\n\nconst logMiddleware = ({getState}) => (next) => (action) => {\n  console.log(action.type, getState());\n  return next(action);\n};\n\nconst stringMiddleware = () => (next) => (action) => {\n  if (typeof action === 'string') {\n    return next({\n      type: action\n    })\n  }\n  return next(action);\n}\n\nconst store = createStore(reducer, applyMiddleware(thunkMiddleware, stringMiddleware, logMiddleware));\n\n\nconst delayedActionCreator = (timeout) => (dispatch) => {\n  setTimeout(() => dispatch({\n    type: \"DELAY_ACTION\"\n  }), timeout)\n}\n\nstore.dispatch(delayedActionCreator(3000));\n\nexport default store;","import ShopHeader from './shop-header';\n\nexport default ShopHeader;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport './shop-header.css';\n\nconst ShopHeader = ({ numItem, total }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link to=\"/react-redux-store/\">\n        <div className=\"logo text-dark\">BookStore</div>\n      </Link>\n      <Link to=\"/cart\">\n        <div className=\"shopping-cart d-flex align-items-center h-100\">\n          <i className=\"cart-icon fa fa-shopping-cart\" />\n          {numItem} item (${total})\n      </div>\n      </Link>\n    </header>\n  )\n};\n\nexport default ShopHeader;\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"book-list-item bg-light rounded shadow p-3\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\"/>\n      </div>\n      <div className=\"book-details\">\n        <span className=\"book-title\">{title}</span>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price.toFixed(2)}</div>\n        <button\n          onClick={onAddedToCart}\n          className=\"btn btn-info add-to-cart shadow-none\">\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>Loading...</div>\n};\n\nexport default Spinner;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;","import React from 'react';\nimport './error-indicator.css'\n\nconst ErrorIndicator = () => {\n  return <div>Error!</div>\n};\n\nexport default ErrorIndicator;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n}\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (\n              <Wrapped\n                {...props}\n                bookstoreService={bookstoreService}\n              />\n            )\n          }\n        }\n      </BookstoreServiceConsumer>\n    )\n  }\n};\n\nexport default withBookstoreService;\n","\nconst booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST'\n  }\n}\n\nconst booksLoaded = (newBooks) => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks\n  }\n};\n\nconst booksError = (error) => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  }\n};\n\nconst bookAddedToCart = (bookId) => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  }\n};\n\nconst bookRemoveFromCart = (bookId) => {\n  return {\n    type: 'BOOK_REMOVE_FROM_CART',\n    payload: bookId\n  }\n};\n\nconst allBooksRemoveFromCart = (bookId) => {\n  return {\n    type: 'ALL_BOOKS_REMOVE_FROM_CART',\n    payload: bookId\n  }\n};\n\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\n  dispatch(booksRequested());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(booksLoaded(data)))\n    .catch((err) => dispatch(booksError(err)));\n};\n\nexport {\n  fetchBooks,\n  bookAddedToCart,\n  bookRemoveFromCart,\n  allBooksRemoveFromCart\n};\n","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp)\n};\n\nexport default compose;\n","import React, { Component } from 'react';\nimport BookListItem from '../book-list-item';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport { withBookstoreService } from '../hoc';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\nimport './book-list.css';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className=\"book-list d-flex flex-wrap justify-content-start p-0\">\n      {\n        books.map((bookItem) => {\n          return (\n            <li key={bookItem.id}>\n              <BookListItem\n                book={bookItem}\n                onAddedToCart={() => onAddedToCart(bookItem.id)}\n                />\n            </li>\n          )\n        })\n      }\n    </ul>\n  )\n};\nclass BookListContainer extends Component {\n\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n    if (loading) {\n      return <Spinner />\n    }\n    if (error) {\n      return <ErrorIndicator />\n    }\n    return <BookList books={books} onAddedToCart={onAddedToCart} />\n  }\n};\n\nconst mapStateToProps = ({bookList: { books, loading, error }}) => {\n  return { books, loading, error }\n}\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n\n  return bindActionCreators({\n    fetchBooks: fetchBooks(bookstoreService),\n    onAddedToCart: bookAddedToCart\n  }, dispatch);\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);\n","import BookList from './book-list';\n\nexport default BookList;\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { bookAddedToCart, bookRemoveFromCart, allBooksRemoveFromCart } from '../../actions';\nimport './shopping-cart-table.css';\n\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\n\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total.toFixed(2)}</td>\n        <td className=\"text-center\">\n          <button\n            onClick={() => onDecrease(id)}\n            className=\"btn btn-outline-warning btn-sm shadow-none\">\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm shadow-none\">\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm shadow-none\">\n            <i className=\"fa fa-trash-o\" />\n          </button>\n        </td>\n      </tr>\n    );\n  }\n\n  const SumTotal = () => {\n    //const sum = items\n      // .map((el) => (el.count * el.total))\n      // .reduce((accumulator, current) => accumulator + current, 0);\n    const sum = items.reduce((acc, curr) => acc + curr.count * curr.total, 0);\n\n    return (\n      <div className=\"total\">\n        Total: ${sum.toFixed(2)}\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"shopping-cart-table mb-3\">\n      <div className=\"d-flex justify-content-between align-items-center\">\n        <h2>Your Order</h2>\n        <SumTotal />\n      </div>\n      <table className=\"table table-bordered m-0\">\n        <thead className=\"table-primary\">\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th className=\"text-center\">Action</th>\n          </tr>\n        </thead>\n\n        <tbody>\n          { items.map(renderRow) }\n        </tbody>\n      </table>\n    </div>\n  )\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal\n  }\n};\n\nconst mapDispatchToProps = {\n  onIncrease: bookAddedToCart,\n  onDecrease: bookRemoveFromCart,\n  onDelete: allBooksRemoveFromCart\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import React from 'react';\nimport BookList from '../book-list';\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  )\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst CartPage = () => {\n  return <div>Cart Page</div>\n};\n\nexport default CartPage;\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport ShopHeader from '../shop-header';\nimport { HomePage, CartPage } from '../pages';\nimport './app.css';\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader numItem={5} total={210} />\n      <Switch>\n        <Route exact\n          path=\"/react-redux-store/\"\n          component={HomePage}\n        />\n        <Route\n          path=\"/cart\"\n          component={CartPage}\n        />\n      </Switch>\n    </main>\n  )\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({\n      hasError: true\n    })\n  };\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />\n    }\n\n    return this.props.children;\n  }\n};\n","export default class BookStoreService {\n\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 31.49,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51oxXEG6TRL._SX379_BO1,204,203,200_.jpg'\n    },\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 29.40,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/81c+o9-DetL.jpg'\n    },\n    {\n      id: 3,\n      title: 'The Ultimate Book of Vehicles',\n      author: 'Anne-Sophie Baumann, Didier Balicevic',\n      price: 15.69,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51JXljxwF5L._SX379_BO1,204,203,200_.jpg'\n    },\n    {\n      id: 4,\n      title: 'The Ultimate Book of Planet Earth',\n      author: 'Anne-Sophie Baumann, Didier Balicevic',\n      price: 18.69,\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/51yOh1rE3bL._SX380_BO1,204,203,200_.jpg'\n    }\n  ];\n\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.97) {\n          reject(new Error(console.log('Something bad happened')))\n        } else {\n          resolve(this.data)\n        }\n      }, 700);\n    })\n  }\n};","\nconst updateBookList = (state, action) => {\n\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    default:\n      return state.bookList;\n  }\n};\n\nexport default updateBookList\n","\nconst updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [\n      ...cartItems.slice(0, idx),\n      ...cartItems.slice(idx + 1)\n    ]\n  };\n  if (idx === -1) {\n    return [\n      ...cartItems,\n      item\n    ]\n  };\n  return [\n    ...cartItems.slice(0, idx),\n    item,\n    ...cartItems.slice(idx + 1)\n  ];\n};\n\nconst updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  }\n};\n\nconst updateOrder = (state, bookId, quantity) => {\n  const { bookList: { books }, shoppingCart: { cartItems } } = state;\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const sum = cartItems\n    .map((el) => (el.count * el.total))\n    .reduce((accumulator, current) => accumulator + current, 0);\n    console.log('sum =',sum)\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    }\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVE_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVE_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload);\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;\n","\nimport updateBookList from './book-list';\nimport updateShoppingCart from './shopping-cart';\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  }\n};\n\nexport default reducer;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}